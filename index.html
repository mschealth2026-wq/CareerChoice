<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Commander's Audit: 30-Point Diagnostic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .choice-btn { border: 2px solid #e2e8f0; transition: all 0.2s ease; }
        .active-strategy { background-color: #4f46e5 !important; color: white !important; border-color: #4f46e5 !important; }
        .active-delivery { background-color: #10b981 !important; color: white !important; border-color: #10b981 !important; }
        .active-both { background-color: #f59e0b !important; color: white !important; border-color: #f59e0b !important; }
        .progress-bar { transition: width 0.4s ease-in-out; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 font-sans antialiased">

    <div class="max-w-4xl mx-auto py-12 px-6">
        <header class="text-center mb-16">
            <h1 class="text-5xl font-black tracking-tighter uppercase italic text-slate-900">The Commander's Audit</h1>
            <p class="text-slate-500 mt-4 text-lg font-medium">Strategic Vision vs. Tactical Execution</p>
            <div id="progress-text" class="mt-4 text-xs font-bold text-indigo-600 uppercase tracking-widest">0 / 30 Completed</div>
            <div class="w-full bg-slate-200 h-2 mt-2 rounded-full overflow-hidden">
                <div id="main-progress" class="progress-bar bg-indigo-600 h-full w-0"></div>
            </div>
        </header>

        <div id="quiz-container" class="space-y-4">
            </div>

        <div class="mt-16 mb-32 text-center">
            <button onclick="calculateResults()" class="bg-slate-900 text-white px-12 py-5 rounded-full font-black text-xl shadow-2xl hover:scale-105 active:scale-95 transition-transform uppercase italic tracking-widest">
                Analyze Archetype
            </button>
        </div>
    </div>

    <div id="result-modal" class="hidden fixed inset-0 bg-slate-900/95 backdrop-blur-xl z-50 flex items-center justify-center p-4">
        <div class="bg-white max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-[2rem] p-10 shadow-2xl">
            <div class="flex justify-between items-start mb-10">
                <div>
                    <h2 class="text-4xl font-black uppercase italic leading-none">The Verdict</h2>
                    <p class="text-slate-400 font-bold mt-2 uppercase tracking-widest" id="archetype-subtitle"></p>
                </div>
                <button onclick="closeModal()" class="bg-slate-100 p-2 rounded-full hover:bg-slate-200 transition">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-12 mb-10">
                <div class="h-80">
                    <canvas id="resultChart"></canvas>
                </div>
                <div class="flex flex-col justify-center">
                    <div id="verdict-text" class="text-lg text-slate-700 leading-relaxed mb-6"></div>
                    <div class="space-y-4" id="stats-bars">
                        </div>
                </div>
            </div>

            <div class="bg-indigo-900 text-white p-8 rounded-3xl">
                <h4 class="font-black uppercase tracking-tighter text-indigo-300 mb-2">Career Roadmap for ENTJ</h4>
                <p id="career-advice" class="text-indigo-100 font-medium"></p>
            </div>
        </div>
    </div>

    <script>
        const questions = [
            { id: 1, cat: "Vision", text: "I prefer defining a brand new goal over building a plan for an existing one." },
            { id: 2, cat: "Vision", text: "Iâ€™d rather look at 3-year market projections than weekly sprint reports." },
            { id: 3, cat: "Vision", text: "I find outdated business models more frustrating than technical bottlenecks." },
            { id: 4, cat: "Execution", text: "I want to be held accountable for Market Share rather than a specific Launch Date." },
            { id: 5, cat: "Stress", text: "In a crisis, I instinctively re-evaluate the goal instead of increasing speed." },
            { id: 6, cat: "Dynamics", text: "I enjoy Resource Allocation (deciding budgets) more than Resource Management (tracking)." },
            { id: 7, cat: "Traits", text: "I use my directness to challenge assumptions rather than enforce standards." },
            { id: 8, cat: "Traits", text: "I'd rather be the Architect who leaves after plans are done than the Builder." },
            { id: 9, cat: "Stakeholder", text: "I prefer spending time with external partners/clients than with the internal team." },
            { id: 10, cat: "Vision", text: "I would rather solve a problem of 'Growth' than a problem of 'Efficiency'." },
            { id: 11, cat: "Politics", text: "I prefer high-level C-suite politics over the daily politics of team morale." },
            { id: 12, cat: "Dynamics", text: "I find it more rewarding to secure a budget than to successfully spend it." },
            { id: 13, cat: "Stress", text: "I am comfortable making a major pivot with only 70% of the data available." },
            { id: 14, cat: "Traits", text: "I'd rather tell a CEO their vision is wrong than tell a Developer their code is late." },
            { id: 15, cat: "Vision", text: "I prefer 'Blue Ocean' ambiguity (no rules) over 'War Room' intensity (tight rules)." },
            { id: 16, cat: "Execution", text: "I value Innovation (new things) significantly more than Consistency (better things)." },
            { id: 17, cat: "Vision", text: "I prefer looking at Leading Indicators (future) over Lagging Indicators (past)." },
            { id: 18, cat: "Politics", text: "I'd rather sacrifice team harmony for a Strategic Win than for a Project Deadline." },
            { id: 19, cat: "Vision", text: "I enjoy Competitive Analysis more than Internal Benchmarking." },
            { id: 20, cat: "Traits", text: "I prefer being a Subject Matter Expert (SME) over being a Process Owner." },
            { id: 21, cat: "Vision", text: "I want my legacy to be 'They changed our direction' rather than 'They were on time'." },
            { id: 22, cat: "Dynamics", text: "I find mundane status-tracking more draining than abstract problem-solving." },
            { id: 23, cat: "Stakeholder", text: "I prefer 'Selling' a vision to stakeholders over 'Protecting' a team from them." },
            { id: 24, cat: "Vision", text: "I would rather attend a Market Trend conference than an Agile/Ops workshop." },
            { id: 25, cat: "Vision", text: "I prefer to work on a 50-page business case over a 50-item task list." },
            { id: 26, cat: "Dynamics", text: "I enjoy the challenge of 'M&A' (buying companies) more than 'Hiring' (buying talent)." },
            { id: 27, cat: "Traits", text: "I'd rather be remembered as 'Visionary' than 'Reliable'." },
            { id: 28, cat: "Vision", text: "I prefer to manage the 'Why' of a product rather than the 'When'." },
            { id: 29, cat: "Stakeholder", text: "I am energized by convincing skeptics of a new, unproven direction." },
            { id: 30, cat: "Traits", text: "I prefer to act as a 'Consultant' rather than a 'Foreman'." }
        ];

        const state = {};
        const quizContainer = document.getElementById('quiz-container');

        questions.forEach(q => {
            const div = document.createElement('div');
            div.className = "bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex flex-col md:flex-row items-center justify-between gap-6 hover:border-indigo-200 transition";
            div.innerHTML = `
                <div class="flex-1"><p class="font-bold text-slate-800 text-lg leading-tight">${q.text}</p></div>
                <div class="flex gap-2 w-full md:w-auto">
                    <button onclick="setChoice(${q.id}, 'delivery', this)" class="choice-btn flex-1 md:flex-none px-5 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest">Delivery</button>
                    <button onclick="setChoice(${q.id}, 'both', this)" class="choice-btn flex-1 md:flex-none px-5 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest">Both</button>
                    <button onclick="setChoice(${q.id}, 'strategy', this)" class="choice-btn flex-1 md:flex-none px-5 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest">Strategy</button>
                </div>
            `;
            quizContainer.appendChild(div);
        });

        function setChoice(id, type, btn) {
            state[id] = type;
            const parent = btn.parentElement;
            parent.querySelectorAll('.choice-btn').forEach(b => b.className = "choice-btn flex-1 md:flex-none px-5 py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest");
            btn.classList.add('active-' + type);
            updateProgress();
        }

        function updateProgress() {
            const count = Object.keys(state).length;
            const pct = (count / 30) * 100;
            document.getElementById('main-progress').style.width = pct + '%';
            document.getElementById('progress-text').innerText = `${count} / 30 Completed`;
        }

        let chart = null;

        function calculateResults() {
            if (Object.keys(state).length < 30) {
                alert("The Audit requires a full data set. Complete all 30 questions.");
                return;
            }

            let s = 0, d = 0, b = 0;
            Object.values(state).forEach(v => {
                if(v === 'strategy') s++; else if(v === 'delivery') d++; else b++;
            });

            document.getElementById('result-modal').classList.remove('hidden');
            
            const subtitle = document.getElementById('archetype-subtitle');
            const verdict = document.getElementById('verdict-text');
            const advice = document.getElementById('career-advice');

            if (b > 12) {
                subtitle.innerText = "The Operational Architect";
                verdict.innerText = "You are the rare Bridge Leader. You have the strategic mind to see 3 years out, but the ENTJ discipline to ensure the systems can handle the growth. You don't just dream; you build the engine.";
                advice.innerText = "Target Roles: COO, VP Product, or Head of Transformation. Focus on companies scaling from 100 to 1000 employees.";
            } else if (s > d) {
                subtitle.innerText = "The Pure Strategist";
                verdict.innerText = "You operate at 30,000 feet. You are energized by market shifts and competitive warfare. Daily status updates feel like 'mundane noise' to you.";
                advice.innerText = "Target Roles: Chief Strategy Officer, Director of Corporate Dev, or Management Consultant. Focus on high-level M&A or long-term roadmapping.";
            } else {
                subtitle.innerText = "The High-Impact General";
                verdict.innerText = "You are an execution specialist. You use your commander traits to crush bottlenecks and deliver world-class results. You value tangible wins over abstract theories.";
                advice.innerText = "Target Roles: Head of Operations, Program Director, or General Manager. Focus on high-stakes delivery where timing is everything.";
            }

            renderChart(s, b, d);
        }

        function renderChart(s, b, d) {
            const ctx = document.getElementById('resultChart').getContext('2d');
            if(chart) chart.destroy();
            chart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Strategy', 'Hybrid', 'Delivery'],
                    datasets: [{
                        data: [s, b, d],
                        backgroundColor: ['#4f46e5', '#f59e0b', '#10b981'],
                        hoverOffset: 20
                    }]
                },
                options: {
                    cutout: '80%',
                    plugins: { legend: { display: false } }
                }
            });
        }

        function closeModal() { document.getElementById('result-modal').classList.add('hidden'); }
    </script>
</body>
</html>
